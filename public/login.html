<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NexusEnergy | Acesso</title>
    <link rel="stylesheet" href="./css/login.css">
    <link rel="shortcut icon" href="./assets/siteInstitucional/LogoNexusMinimizado.png" type="image/x-icon">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
</head>

<body>

    

    <div class="boxesDiv">

        <div class="titleText1">
            <h2 id="titleText">Seja bem-vindo(a) a
                <b style="color: #17C7E1; text-shadow: 0 0 3px #00ffea;">NexSystem!</b>
            </h2>
        </div>

        <div class="boxCinza">
            <div class="boxCinzaContent1">
                <div onclick="telaHome()" class="botaoVoltar1" id="botaoVoltar">
                    <img src="./assets/login/botaoVoltar1.png" alt="">
                </div>
                <div class="boxLogo1">
                    <img class="logoImg" src="./assets/siteInstitucional/logoNexusEnergy.png">
                </div>
            </div>
            <div class="boxCinzaContent2">
                <div onclick="telaHome()" class="botaoVoltar2" id="botaoVoltar">
                    <img src="./assets/login/botaoVoltar2.png" alt="">
                </div>
                <div class="boxLogo2">
                    <img class="logoImg" src="./assets/siteInstitucional/logoNexusEnergy.png">
                </div>
            </div>
        </div>
        <div class="boxRosa">
            <div class="boxRosaContent1">

                <div class="titleTextLogin">
                    <h2 id="titleTextLogin1">L O G I N
                    </h2>
                </div>

                <div class="inputBox" id="inputBox">
                    <div class="input-group">
                        <input required="" type="text" name="text" class="input" id="inputEmail1">
                        <label class="user-label">Email</label>
                    </div>

                    <div class="input-group">
                        <input required="" type="password" name="text" autocomplete="off" class="input"
                            id="inputSenha1">
                        <img src="./assets/login/olho.png" class="olhoSenha" id="olhoSenha1">
                        <label class="user-label">Senha</label>
                    </div>

                    <button onclick="logar()">Continuar</button>
                </div>
                <p class="copyRight">Copyright 2024 - NexusEnergy Inc. All rights Reserved</p>
             </div>
            
            <div class="boxRosaContent2">
                <div class="titleText2">
                    <h2 id="titleText">Agora é a sua chance
                        <b style="color: #17C7E1;">de mudar o mundo</b>
                    </h2>
                </div>
                <div class="inputBox" id="inputBox">
                    <div class="input-group">
                        <input required="" type="text" name="text" autocomplete="off" class="input" id="inputEmail2">
                        <label class="user-label">Senha atual</label>
                    </div>

                    <div class="input-group">
                        <input required="" type="password" name="text" autocomplete="off" class="input"
                            id="inputSenha2">
                        <img src="./assets/login/olho.png" class="olhoSenha" id="olhoSenha2">
                        <label class="user-label">Nova senha</label>
                    </div>

                    <div class="input-group">
                        <input required="" type="password" name="text" autocomplete="off" class="input"
                            id="inputSenha3">
                        <img src="./assets/login/olho.png" class="olhoSenha" id="olhoSenha3">
                        <label class="user-label">Confirme a senha</label>
                    </div>

                    <button>Cadastrar</button>
                </div>

                <p class="textCadastro2">Já possui uma conta? <b class="botaoCadastro" onclick="mudarTela2()">Faça o
                        login</b></p>

              

            </div>
        </div>
    </div>

</body>

</html>

<script>
    // Exibir a senha:
    const olhoSenha1 = document.getElementById('olhoSenha1');
    const inputSenha1 = document.getElementById('inputSenha1');
    const olhoSenha2 = document.getElementById('olhoSenha2');
    const inputSenha2 = document.getElementById('inputSenha2');
    const olhoSenha3 = document.getElementById('olhoSenha3');
    const inputSenha3 = document.getElementById('inputSenha3');


    olhoSenha1.addEventListener('click', function() {
        if (inputSenha1.type === 'password') {
            inputSenha1.type = 'text';
        } else {
            inputSenha1.type = 'password';
        }
    });

    olhoSenha2.addEventListener('click', function() {
        if (inputSenha2.type === 'password') {
            inputSenha2.type = 'text';
        } else {
            inputSenha2.type = 'password';
        }
    });

    olhoSenha3.addEventListener('click', function() {
        if (inputSenha3.type === 'password') {
            inputSenha3.type = 'text';
        } else {
            inputSenha3.type = 'password';
        }
    });


// Animação inicial da tela de cadastro e login
document.addEventListener("DOMContentLoaded", function() {
    const boxesDiv = document.querySelector('.boxesDiv');

  });


function mudarTela1() {
    const boxCinza = document.querySelector(".boxCinza");
    const boxRosa = document.querySelector(".boxRosa");
    const boxRosaContent1 = document.querySelector(".boxRosaContent1");
    const boxRosaContent2 = document.querySelector(".boxRosaContent2");
    const boxCinzaContent1 = document.querySelector(".boxCinzaContent1");
    const boxCinzaContent2 = document.querySelector(".boxCinzaContent2");
    const inputEmail2 = document.getElementById("inputEmail2");
    const inputSenha2 = document.getElementById("inputSenha2");
    const inputSenha3 = document.getElementById("inputSenha3");


    
        boxCinza.style.transform = "translateX(100%)";
        boxRosa.style.transform = "translateX(-100%)";
        boxCinza.style.borderRadius = "0 50px 50px 0";
        boxRosa.style.borderRadius = "50px 0 0 50px";
        inputEmail2.value = '';
        inputSenha2.value = '';
        inputSenha3.value = '';


    setTimeout(function() {    
        boxRosaContent1.style.display = "none";
        boxRosaContent2.style.display = "flex";
        boxCinzaContent1.style.display = "none";
        boxCinzaContent2.style.display = "block";
    }, 300); // Tempo em milissegundos (300ms = 0.3 segundos)
}

function mudarTela2() {
    const boxCinza = document.querySelector(".boxCinza");
    const boxRosa = document.querySelector(".boxRosa");
    const boxRosaContent1 = document.querySelector(".boxRosaContent1");
    const boxRosaContent2 = document.querySelector(".boxRosaContent2");
    const boxCinzaContent1 = document.querySelector(".boxCinzaContent1");
    const boxCinzaContent2 = document.querySelector(".boxCinzaContent2");
    const inputEmail1 = document.getElementById("inputEmail1");
    const inputSenha1 = document.getElementById("inputSenha1");

    
        boxCinza.style.transform = "translateX(-0%)";
        boxRosa.style.transform = "translateX(0%)";
        boxCinza.style.borderRadius = "50px 0 0 50px";
        boxRosa.style.borderRadius = "0 50px 50px 0";
        inputEmail1.value = '';
        inputSenha1.value = '';

    setTimeout(function() {    
        boxCinzaContent1.style.display = "block";
        boxCinzaContent2.style.display = "none";
        boxRosaContent1.style.display = "flex";
        boxRosaContent2.style.display = "none";
    }, 300); // Tempo em milissegundos (300ms = 0.3 segundos)
}
  



function telaHome(){
    window.location.href="./index.html"
}


function logar(){
    email = inputEmail1.value;
    senha = inputSenha1.value;

    if (email === '' || senha === '') {
        alert("Preencha todos os dados!");
    } else if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) { 
        alert("Por favor, insira um email válido!");
    } else {
        fetch("/usuarios/autenticar", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify({
                emailServer: email,
                senhaServer: senha
            })
        }).then(function(resposta){
            if(resposta.ok){
                console.log(resposta);

                window.location.href= "./NexSystem.html"
            } else{
                alert("Houve um erro ao tentar realizar o login!");
            }
        })
            
        
    }   
}
</script>